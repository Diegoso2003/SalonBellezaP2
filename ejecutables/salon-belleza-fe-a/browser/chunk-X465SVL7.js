import{a as U}from"./chunk-6VF6MSZ4.js";import{a as A}from"./chunk-DGXXTX47.js";import{o as H}from"./chunk-QEQSUI4L.js";import{b as x,e as y}from"./chunk-H2DLJ7WX.js";import{$ as j,Ab as z,Ga as I,Ha as F,Ka as a,La as N,Va as v,W as l,Wb as L,Xa as m,Y as s,Yb as Y,_a as f,cb as o,db as r,eb as c,gb as _,hb as u,qb as d,rb as V,sb as b,vb as p,xb as B,yb as R,zb as k}from"./chunk-TQRRVTAY.js";function G(i,n){if(i&1&&c(0,"img",0),i&2){let e=u();m("src",e.imagenUrl,I)}}function X(i,n){i&1&&c(0,"img",1)}var w=class i{anuncioId;imagenUrl=null;_usuarioService=l(A);_sanitizer=l(x);ngOnInit(){this.obtenerImagen()}obtenerImagen(){this._usuarioService.obtenerImagenAnuncio(this.anuncioId).subscribe({next:n=>{let e=URL.createObjectURL(n);this.imagenUrl=this._sanitizer.bypassSecurityTrustUrl(e)},error:n=>{console.error("Error al obtener la imagen de perfil:",n),this.imagenUrl=null}})}ngOnDestroy(){this.imagenUrl&&URL.revokeObjectURL(this.imagenUrl)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-anuncio-imagen"]],inputs:{anuncioId:"anuncioId"},standalone:!0,features:[p],decls:2,vars:1,consts:[["alt","Imagen de perfil",1,"w-100","mx-auto","d-block","m-3",2,"max-height","400px",3,"src"],["src","...","alt","Imagen de perfil",1,"w-100","mx-auto","d-block","m-3",2,"max-height","400px"]],template:function(e,t){e&1&&v(0,G,1,1,"img",0)(1,X,1,0,"img",1),e&2&&f(t.imagenUrl?0:1)}})};var D=class i{constructor(n){this.sanitizer=n}urlYoutube;videoId="";safeYoutubeUrl;ngOnInit(){this.extraerIdVideo();let n=`https://www.youtube.com/embed/${this.videoId}?autoplay=1&mute=1&loop=1&playlist=${this.videoId}`;this.safeYoutubeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(n)}extraerIdVideo(){this.videoId=this.urlYoutube.substring(17,28)}static \u0275fac=function(e){return new(e||i)(N(x))};static \u0275cmp=s({type:i,selectors:[["app-anuncio-video"]],inputs:{urlYoutube:"urlYoutube"},standalone:!0,features:[p],decls:2,vars:1,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"height","400px"],["frameborder","0","allowfullscreen","",2,"width","100%","height","100%",3,"src"]],template:function(e,t){e&1&&(o(0,"div",0),c(1,"iframe",1),r()),e&2&&(a(),m("src",t.safeYoutubeUrl,F))}})};function q(i,n){if(i&1&&c(0,"app-anuncio-imagen",2),i&2){let e=u();m("anuncioId",e.anuncio.idAnuncio)}}function J(i,n){if(i&1&&c(0,"app-anuncio-video",3),i&2){let e=u();m("urlYoutube",e.anuncio.urlVideo)}}function K(i,n){if(i&1&&(o(0,"div",4),d(1),r()),i&2){let e=u();a(),b(" ",e.anuncio.texto," ")}}function W(i,n){if(i&1&&(o(0,"div",5),d(1),r()),i&2){let e=u();a(),b(" ",e.anuncio.texto," ")}}var O=class i{anuncio;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-anuncio"]],inputs:{anuncio:"anuncio"},standalone:!0,features:[p],decls:6,vars:2,consts:[[1,"card","w-100","shadow"],[1,"card-body","custom-card"],[3,"anuncioId"],[3,"urlYoutube"],[1,"text-center","fs-4","fw-bold","text-wrap"],[1,"text-center","fs-6","fw-bold","text-wrap",2,"max-height","400px"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1),v(2,q,1,1,"app-anuncio-imagen",2)(3,J,1,1,"app-anuncio-video",3)(4,K,2,1,"div",4)(5,W,2,1,"div",5),r()()),e&2&&(a(2),f(t.anuncio.tipo==="IMAGEN"?2:t.anuncio.tipo==="VIDEO"?3:-1),a(2),f(t.anuncio.tipo==="TEXTO"?4:5))},dependencies:[w,D]})};var Z=(i,n)=>({top:"50%",transform:"translateY(-50%)",right:i,left:n,width:"25%"});function ee(i,n){if(i&1&&c(0,"app-anuncio",1),i&2){let e=u();m("anuncio",e.anuncio)}}var $=class i{anuncioRecuperado=!1;anuncio;_anuncioService=l(A);_router=l(y);url;derecho;ngOnInit(){this.recuperarAnuncio()}guardarHistorial(){this.url=window.location.origin+this._router.url;let n={idAnuncio:this.anuncio.idAnuncio,url:this.url,fechaPublicacion:this.anuncio.vigencia.fechaPublicacion,cantidad:0};this._anuncioService.reporteAnuncio(n).subscribe({next:()=>{console.log("historial guardado")},error:e=>{console.log(e.error.mensaje||"Error al guardar historial")}})}recuperarAnuncio(){this._anuncioService.obtenerAnuncioQueSeMostrara().subscribe({next:n=>{this.anuncio=n,this.anuncioRecuperado=!0,this.guardarHistorial()},error:n=>{console.log(n.error.mensaje||"Error al recuperar anuncio"),this.anuncioRecuperado=!1}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-vista-anuncio"]],inputs:{derecho:"derecho"},standalone:!0,features:[p],decls:2,vars:5,consts:[[1,"position-fixed","d-flex","align-items-center",3,"ngStyle"],[3,"anuncio"]],template:function(e,t){e&1&&(o(0,"div",0),v(1,ee,1,1,"app-anuncio",1),r()),e&2&&(m("ngStyle",B(2,Z,t.derecho?"20px":"auto",t.derecho?"auto":"20px")),a(),f(t.anuncioRecuperado?1:-1))},dependencies:[O,L]})};var T=class i{idServicio;router=l(y);agendarCita(){console.log("Agendar cita para el servicio con ID:",this.idServicio),this.router.navigate([`/cliente/agendar_cita/${this.idServicio}`])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-boton-agendar"]],inputs:{idServicio:"idServicio"},standalone:!0,features:[p],decls:2,vars:0,consts:[["type","button",1,"btn","btn-sm","custom-button",3,"click"]],template:function(e,t){e&1&&(o(0,"button",0),_("click",function(){return t.agendarCita()}),d(1,"Agendar cita"),r())}})};var E=class i{idServicio;informacion=l(H);_servicioService=l(U);obtenerCatalogo(){this._servicioService.obtenerCatalogoServicio(this.idServicio).subscribe({next:n=>{let e=new Blob([n],{type:"application/pdf"}),t=URL.createObjectURL(e);window.open(t,"_blank")},error:n=>{this.informacion.informarError(n.error.mensaje||"Error al obtener el catalogo, intente de nuevo")}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-boton-catalogo"]],inputs:{idServicio:"idServicio"},standalone:!0,features:[p],decls:2,vars:0,consts:[["type","button",1,"btn","btn-sm","custom-button",3,"click"]],template:function(e,t){e&1&&(o(0,"button",0),_("click",function(){return t.obtenerCatalogo()}),d(1,"Ver catalogo"),r())}})};var M=class i{transform(n){let e=n.split(":"),t=parseInt(e[0]),h=parseInt(e[1]),S="";return t>0&&(t>1?S+=t+" horas":S+=t+" hora"),h>0&&(t>0&&(S+=" y "),h>1?S+=h+" minutos":S+=h+" minuto"),S}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=j({name:"duracionPipe",type:i,pure:!0,standalone:!0})};function ie(i,n){if(i&1&&c(0,"img",1),i&2){let e=u();m("src",e.imagenUrl,I)}}function ne(i,n){i&1&&c(0,"img",2)}var P=class i{idServicio;imagenUrl=null;_servicioService=l(U);_sanitizer=l(x);ngOnInit(){this.obtenerImagenServicio()}obtenerImagenServicio(){this._servicioService.obtenerImagenServicio(this.idServicio).subscribe({next:n=>{let e=URL.createObjectURL(n);this.imagenUrl=this._sanitizer.bypassSecurityTrustUrl(e)},error:n=>{console.error("Error al obtener la imagen de perfil:",n),this.imagenUrl=null}})}ngOnDestroy(){this.imagenUrl&&URL.revokeObjectURL(this.imagenUrl)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-imagen-servicio"]],inputs:{idServicio:"idServicio"},standalone:!0,features:[p],decls:3,vars:1,consts:[[1,"imagen-wrapper"],["alt","Imagen del servicio",1,"servicio-img","rounded-end",3,"src"],["src","...","alt","Imagen del servicio",1,"servicio-img","rounded-end"]],template:function(e,t){e&1&&(o(0,"div",0),v(1,ie,1,1,"img",1)(2,ne,1,0,"img",2),r()),e&2&&(a(),f(t.imagenUrl?1:2))},styles:[".image-container[_ngcontent-%COMP%]{max-height:500px;overflow:hidden}.imagen-wrapper[_ngcontent-%COMP%]{height:100%;max-height:500px}.servicio-img[_ngcontent-%COMP%]{width:100%;height:100%;max-height:500px;object-fit:fill}"]})};function te(i,n){if(i&1&&c(0,"app-boton-agendar",10),i&2){let e=u();m("idServicio",e.servicio.idServicio)}}var Q=class i{servicio;vista_cliente;vista_individual;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-vista-servicio"]],inputs:{servicio:"servicio",vista_cliente:"vista_cliente",vista_individual:"vista_individual"},standalone:!0,features:[p],decls:22,vars:14,consts:[[1,"row","g-0"],[1,"col-md-7"],[1,"card-body","custom-card","description-container"],[1,"card-title","text-center"],[1,"overflow-auto",2,"max-height","130px","min-height","130px"],[1,"card-text"],[1,"d-flex","flex-column","align-items-start"],[1,"text-body-secondary"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","gap-2"],[3,"idServicio"],[1,"col-md-5","image-container"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),d(4),r(),o(5,"div",4)(6,"p",5),d(7),r(),o(8,"div",6)(9,"small",7),d(10),R(11,"duracionPipe"),r(),o(12,"small",7),d(13),R(14,"currency"),r()()(),c(15,"br"),o(16,"div",8)(17,"div",9),v(18,te,1,1,"app-boton-agendar",10),c(19,"app-boton-catalogo",10),r()()()(),o(20,"div",11),c(21,"app-imagen-servicio",10),r()()),e&2&&(a(4),V(t.servicio.nombreServicio),a(3),b(" ",t.servicio.descripcion," "),a(3),b(" Duracion: ",k(11,7,t.servicio.duracion)," "),a(3),b(" Precio ",z(14,9,t.servicio.precio,"Q","symbol","1.2-2")," "),a(5),f(t.vista_cliente&&!t.vista_individual?18:-1),a(),m("idServicio",t.servicio.idServicio),a(2),m("idServicio",t.servicio.idServicio))},dependencies:[Y,T,E,M,P]})};export{$ as a,Q as b};
