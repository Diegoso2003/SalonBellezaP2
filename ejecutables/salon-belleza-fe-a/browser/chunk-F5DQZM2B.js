import{a as A}from"./chunk-6VINH2C6.js";import{a as B}from"./chunk-BCQ6RXAA.js";import{a as P}from"./chunk-6VF6MSZ4.js";import"./chunk-2ZKC73YP.js";import{a as R}from"./chunk-2MZD7B76.js";import{a as j,b as M}from"./chunk-OCPFQW2A.js";import{a as D}from"./chunk-URET6IV6.js";import{a as S,b as C,c as G,d as y,e as V,g as _,h as E,m as x,n as N,o as T,p as w}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{Ka as n,La as h,Va as F,Vb as I,W as f,Xa as r,Y as p,_a as b,cb as t,db as c,eb as s,gb as g,hb as u,qb as m,vb as v,xb as l}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var $=(o,e)=>({"mb-5":o,"mb-3":e}),k=(o,e)=>({"is-invalid":o,"is-valid":e}),d=class o{constructor(e){this.fb=e;this.servicioGananciasForm=this.fb.group({fechaInicio:["",[C.pattern(/^\d{4}-\d{2}-\d{2}$/)]],fechaFin:["",[C.pattern(/^\d{4}-\d{2}-\d{2}$/)]]}),this.validador=new D(this.servicioGananciasForm)}servicioGananciasForm;validador;informacion=f(T);servicioService=f(P);informeCambio;servicio;agregarReporte(e){Object.assign(this.servicio,e)}informarCambio(e){this.informeCambio.setFechaInicio(e.fechaInicio||""),this.informeCambio.setFechaFin(e.fechaFin||""),this.informeCambio.setCampo(e.campo||""),this.informeCambio.setCambio(!0)}armarConsulta(){let e=this.servicioGananciasForm.get("fechaInicio")?.value,i=this.servicioGananciasForm.get("fechaFin")?.value,a={};return e!==""&&(a.fechaInicio=e),i!==""&&(a.fechaFin=i),a}mandarInfo(){let e=this.armarConsulta();this.servicioService.servicioMayorGanancia(e).subscribe({next:i=>{this.agregarReporte(i),this.informarCambio(e)},error:i=>{this.informacion.informarError(i.error.mensaje||"Error al obtener el reporte")}})}enviar(){this.informeCambio.vaciarFechas(),this.servicioGananciasForm.valid?this.mandarInfo():(this.informacion.informarError("ingresar correctamente los datos ingresados"),this.servicioGananciasForm.markAllAsTouched())}esFechaInicioInvalida(){return this.validador.hasErrors("fechaInicio","pattern")}esFechaFinInvalida(){return this.validador.hasErrors("fechaFin","pattern")}esFechaInicioValida(){return this.validador.esValido("fechaInicio")}esFechaFinValida(){return this.validador.esValido("fechaFin")}static \u0275fac=function(i){return new(i||o)(h(x))};static \u0275cmp=p({type:o,selectors:[["app-form-servicio-ganancia"]],inputs:{informeCambio:"informeCambio",servicio:"servicio"},standalone:!0,features:[v],decls:21,vars:17,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip02",1,"form-label"],["type","date","id","validationTooltip02","formControlName","fechaInicio",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip01",1,"form-label"],["type","date","id","validationTooltip01","formControlName","fechaFin",1,"form-control",3,"ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(i,a){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),m(4," Reporte del servicio con mas ganancias "),c(),t(5,"form",4),g("submit",function(){return a.enviar()}),t(6,"div",5)(7,"label",6),m(8,"Fecha inicio"),c(),s(9,"input",7),t(10,"div",8),m(11,"Ingrese una fecha valida"),c()(),t(12,"div",5)(13,"label",9),m(14,"Fecha fin"),c(),s(15,"input",10),t(16,"div",8),m(17,"Ingrese una fecha valida"),c()(),t(18,"div",11)(19,"button",12),m(20,"Realizar consulta"),c()()()()()()),i&2&&(n(5),r("formGroup",a.servicioGananciasForm),n(),r("ngClass",l(5,$,a.esFechaInicioInvalida(),!a.esFechaInicioInvalida())),n(3),r("ngClass",l(8,k,a.esFechaInicioInvalida(),a.esFechaInicioValida())),n(3),r("ngClass",l(11,$,a.esFechaFinInvalida(),!a.esFechaFinInvalida())),n(3),r("ngClass",l(14,k,a.esFechaFinInvalida(),a.esFechaFinValida())))},dependencies:[I,N,V,S,G,y,_,E]})};function H(o,e){if(o&1&&s(0,"app-form-servicio-ganancia",0),o&2){let i=u();r("informeCambio",i.informeCambio)("servicio",i.servicio)}}function J(o,e){if(o&1&&(t(0,"div",1),s(1,"app-boton-atras",2),t(2,"h2",3),m(3,"Reporte servicios con mas ganancias"),c(),s(4,"app-boton-importar-servicio-ganancias",4),c(),s(5,"br")(6,"app-intervalo-vista",4),t(7,"div",1)(8,"div",5)(9,"div",6),s(10,"app-tabla-servicio-ganancias",7),c()()()),o&2){let i=u();n(),r("informe",i.informeCambio),n(3),r("informeCambio",i.informeCambio),n(2),r("informeCambio",i.informeCambio),n(4),r("servicio",i.servicio)}}var z=class o{informeCambio=new j;servicio={};static \u0275fac=function(i){return new(i||o)};static \u0275cmp=p({type:o,selectors:[["app-vista-servicio-ganancia"]],standalone:!0,features:[v],decls:3,vars:1,consts:[[3,"informeCambio","servicio"],[1,"d-flex","align-items-center","justify-content-center"],[3,"informe"],[1,"m-3"],[3,"informeCambio"],[1,"card","w-50","m-3","shadow"],[1,"card-body","custom-card"],[3,"servicio"]],template:function(i,a){i&1&&(s(0,"app-informacion"),F(1,H,1,2,"app-form-servicio-ganancia",0)(2,J,11,4)),i&2&&(n(),b(a.informeCambio.getCambio()?2:1))},dependencies:[w,d,M,B,R,A]})};export{z as VistaServicioGananciaComponent};
