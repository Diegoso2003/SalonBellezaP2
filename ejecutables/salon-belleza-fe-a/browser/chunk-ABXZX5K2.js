import{a as K}from"./chunk-6FP45YGO.js";import{a as J}from"./chunk-BCQ6RXAA.js";import{a as q}from"./chunk-5SBUVE6J.js";import"./chunk-2ZKC73YP.js";import{a as H}from"./chunk-2MZD7B76.js";import{a as k,b as z}from"./chunk-OCPFQW2A.js";import{a as $}from"./chunk-URET6IV6.js";import{a as T,b as v,c as A,d as D,e as R,g as N,h as w,m as B,n as j,o as M,p as P}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{$a as _,Ka as t,La as E,Va as F,Vb as x,W as h,Xa as m,Y as c,_a as b,ab as y,bb as S,cb as n,db as r,eb as s,gb as V,hb as f,qb as l,sb as G,vb as C,xb as p}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var g=(a,i)=>({"mb-5":a,"mb-3":i}),I=(a,i)=>({"is-invalid":a,"is-valid":i}),u=class a{constructor(i){this.formBuilder=i;this.empleadoCitasForm=this.formBuilder.group({fechaInicio:["",[v.pattern(/^\d{4}-\d{2}-\d{2}$/)]],fechaFin:["",[v.pattern(/^\d{4}-\d{2}-\d{2}$/)]],dpi:["",[v.pattern(/^[1-9]\d{12}$/)]]}),this.validador=new $(this.empleadoCitasForm)}empleadoCitasForm;informeCambio;empleadoGananciasArreglo;validador;informacion=h(M);adminService=h(q);enviar(){this.informeCambio.vaciarFechas(),this.empleadoCitasForm.valid?this.mandarInfo():(this.informacion.informarError("ingresar correctamente los datos ingresados"),this.empleadoCitasForm.markAllAsTouched())}mandarInfo(){let i=this.armarConsulta();this.adminService.obtenerCitasPorEmpleado(i).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(i)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener el reporte de citas por empleado")}})}agregarReporte(i){this.empleadoGananciasArreglo.length=0,this.empleadoGananciasArreglo.push(...i)}informarCambio(i){this.informeCambio.setFechaInicio(i.fechaInicio||""),this.informeCambio.setFechaFin(i.fechaFin||""),this.informeCambio.setCampo(i.campo||""),this.informeCambio.setCambio(!0)}armarConsulta(){let i=this.empleadoCitasForm.get("fechaInicio")?.value,e=this.empleadoCitasForm.get("fechaFin")?.value,o=this.empleadoCitasForm.get("dpi")?.value,d={};return i!==""&&(d.fechaInicio=i),e!==""&&(d.fechaFin=e),o!==""&&(d.campo=o),d}esFechaInicioInvalida(){return this.validador.hasErrors("fechaInicio","pattern")}esFechaFinInvalida(){return this.validador.hasErrors("fechaFin","pattern")}esFechaInicioValida(){return this.validador.esValido("fechaInicio")}esFechaFinValida(){return this.validador.esValido("fechaFin")}esDpiInvalido(){return this.validador.hasErrors("dpi","pattern")}esDpiValido(){return this.validador.esValido("dpi")}static \u0275fac=function(e){return new(e||a)(E(B))};static \u0275cmp=c({type:a,selectors:[["app-form-empleado-citas"]],inputs:{informeCambio:"informeCambio",empleadoGananciasArreglo:"empleadoGananciasArreglo"},standalone:!0,features:[C],decls:27,vars:25,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip02",1,"form-label"],["type","date","id","validationTooltip02","formControlName","fechaInicio",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip01",1,"form-label"],["type","date","id","validationTooltip01","formControlName","fechaFin",1,"form-control",3,"ngClass"],["for","validationTooltip04",1,"form-label"],["type","text","id","validationTooltip04","formControlName","dpi",1,"form-control",3,"ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),l(4," Reporte de los 5 empleados que han atendido mas citas "),r(),n(5,"form",4),V("submit",function(){return o.enviar()}),n(6,"div",5)(7,"label",6),l(8,"Fecha inicio"),r(),s(9,"input",7),n(10,"div",8),l(11,"Ingrese una fecha valida"),r()(),n(12,"div",5)(13,"label",9),l(14,"Fecha fin"),r(),s(15,"input",10),n(16,"div",8),l(17,"Ingrese una fecha valida"),r()(),n(18,"div",5)(19,"label",11),l(20,"DPI empleado"),r(),s(21,"input",12),n(22,"div",8),l(23,"Ingrese un dpi valido"),r()(),n(24,"div",13)(25,"button",14),l(26,"Realizar consulta"),r()()()()()()),e&2&&(t(5),m("formGroup",o.empleadoCitasForm),t(),m("ngClass",p(7,g,o.esFechaInicioInvalida(),!o.esFechaInicioInvalida())),t(3),m("ngClass",p(10,I,o.esFechaInicioInvalida(),o.esFechaInicioValida())),t(3),m("ngClass",p(13,g,o.esFechaFinInvalida(),!o.esFechaFinInvalida())),t(3),m("ngClass",p(16,I,o.esFechaFinInvalida(),o.esFechaFinValida())),t(3),m("ngClass",p(19,g,o.esDpiInvalido(),!o.esDpiInvalido())),t(3),m("ngClass",p(22,I,o.esDpiInvalido(),o.esDpiValido())))},dependencies:[x,j,R,T,A,D,N,w]})};function U(a,i){if(a&1&&s(0,"app-form-empleado-citas",0),a&2){let e=f();m("informeCambio",e.informeCambio)("empleadoGananciasArreglo",e.empleadoGananciasArreglo)}}function W(a,i){if(a&1&&(n(0,"h5",5),l(1),r()),a&2){let e=f(2);t(),G(" Filtrado por el empleado: ",e.informeCambio.getCampo(),`
`)}}function X(a,i){if(a&1&&s(0,"app-tabla-empleado-informe",8),a&2){let e=i.$implicit;m("empleado",e)}}function Y(a,i){a&1&&(n(0,"div",9),l(1," Sin registro de citas atendidas "),r())}function Z(a,i){if(a&1&&(n(0,"div",1),s(1,"app-boton-atras",2),n(2,"h2",3),l(3,"Reporte de empleado con mas citas atendidas"),r(),s(4,"app-boton-importar-servicio-ganancias",4),r(),s(5,"br")(6,"app-intervalo-vista",4),F(7,W,2,1,"h5",5),n(8,"div",1)(9,"div",6)(10,"div",7),y(11,X,1,1,"app-tabla-empleado-informe",8,_,!1,Y,2,0,"div",9),r()()()),a&2){let e=f();t(),m("informe",e.informeCambio),t(3),m("informeCambio",e.informeCambio),t(2),m("informeCambio",e.informeCambio),t(),b(e.informeCambio.esCampoValido()?7:-1),t(4),S(e.empleadoGananciasArreglo)}}var L=class a{informeCambio=new k;empleadoGananciasArreglo=[];static \u0275fac=function(e){return new(e||a)};static \u0275cmp=c({type:a,selectors:[["app-vista-reporte-empleado-citas"]],standalone:!0,features:[C],decls:3,vars:1,consts:[[3,"informeCambio","empleadoGananciasArreglo"],[1,"d-flex","align-items-center","justify-content-center"],[3,"informe"],[1,"m-3"],[3,"informeCambio"],[1,"text-center"],[1,"card","w-50","m-3","shadow"],[1,"card-body","custom-card"],[3,"empleado"],["role","alert",1,"alert","alert-warning","w-100"]],template:function(e,o){e&1&&(s(0,"app-informacion"),F(1,U,1,2,"app-form-empleado-citas",0)(2,Z,14,5)),e&2&&(t(),b(o.informeCambio.getCambio()?2:1))},dependencies:[P,u,z,J,H,K]})};export{L as VistaReporteEmpleadoCitasComponent};
