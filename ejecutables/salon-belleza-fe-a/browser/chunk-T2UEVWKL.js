import{a as W}from"./chunk-6VF6MSZ4.js";import{a as U}from"./chunk-2ZKC73YP.js";import{a as Q}from"./chunk-2MZD7B76.js";import{a as K,b as L}from"./chunk-OCPFQW2A.js";import{a as J}from"./chunk-URET6IV6.js";import{a as q,b as _,c as j,d as P,e as G,g as H,h as A,m as z,n as $,o as k,p as O}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{c as B}from"./chunk-H2DLJ7WX.js";import{$a as V,Ka as n,La as M,Va as f,Vb as D,W as v,Xa as c,Y as l,_a as u,ab as b,bb as S,cb as t,db as r,eb as m,gb as T,ha as y,hb as x,qb as a,rb as d,sb as C,vb as p,xb as h,yb as w,zb as N}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var X=(i,o)=>({"mb-5":i,"mb-3":o}),Y=(i,o)=>({"is-invalid":i,"is-valid":o});function ee(i,o){i&1&&a(0," Reporte de los 5 servicios mas reservados ")}function ie(i,o){i&1&&a(0," Reporte de los 5 servicios menos reservados ")}var F=class i{constructor(o){this.formBuilder=o;this.servicioReservadoForm=this.formBuilder.group({fechaInicio:["",[_.pattern(/^\d{4}-\d{2}-\d{2}$/)]],fechaFin:["",[_.pattern(/^\d{4}-\d{2}-\d{2}$/)]]}),this.validador=new J(this.servicioReservadoForm)}servicioReservadoForm;validador;informacion=v(k);servicioService=v(W);serviciosMasReservados;informeCambio;datos;enviar(){this.informeCambio.vaciarFechas(),this.servicioReservadoForm.valid?this.mandarInfo():(this.servicioReservadoForm.markAllAsTouched(),this.informacion.informarError("ingresar correctamente los datos solicitados"))}mandarInfo(){let o=this.armarConsulta();this.serviciosMasReservados?this.servicioService.serviciosMasReservados(o).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(o)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener los servicios m\xE1s reservados")}}):this.servicioService.serviciosMenosReservados(o).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(o)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener los servicios menos reservados")}})}agregarReporte(o){this.datos.length=0,this.datos.push(...o)}informarCambio(o){this.informeCambio.setFechaInicio(o.fechaInicio||""),this.informeCambio.setFechaFin(o.fechaFin||""),this.informeCambio.setCambio(!0)}armarConsulta(){let o=this.servicioReservadoForm.get("fechaInicio")?.value,e=this.servicioReservadoForm.get("fechaFin")?.value,s={};return o!==""&&(s.fechaInicio=o),e!==""&&(s.fechaFin=e),s}esFechaInicioInvalida(){return this.validador.hasErrors("fechaInicio","pattern")}esFechaFinInvalida(){return this.validador.hasErrors("fechaFin","pattern")}esFechaInicioValida(){return this.validador.esValido("fechaInicio")}esFechaFinValida(){return this.validador.esValido("fechaFin")}static \u0275fac=function(e){return new(e||i)(M(z))};static \u0275cmp=l({type:i,selectors:[["app-form-servicios-reservados"]],inputs:{serviciosMasReservados:"serviciosMasReservados",informeCambio:"informeCambio",datos:"datos"},standalone:!0,features:[p],decls:22,vars:18,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip02",1,"form-label"],["type","date","id","validationTooltip02","formControlName","fechaInicio",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip01",1,"form-label"],["type","date","id","validationTooltip01","formControlName","fechaFin",1,"form-control",3,"ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),f(4,ee,1,0)(5,ie,1,0),r(),t(6,"form",4),T("submit",function(){return s.enviar()}),t(7,"div",5)(8,"label",6),a(9,"Fecha inicio"),r(),m(10,"input",7),t(11,"div",8),a(12,"Ingrese una fecha valida"),r()(),t(13,"div",5)(14,"label",9),a(15,"Fecha fin"),r(),m(16,"input",10),t(17,"div",8),a(18,"Ingrese una fecha valida"),r()(),t(19,"div",11)(20,"button",12),a(21,"Realizar consulta"),r()()()()()()),e&2&&(n(4),u(s.serviciosMasReservados?4:5),n(2),c("formGroup",s.servicioReservadoForm),n(),c("ngClass",h(6,X,s.esFechaInicioInvalida(),!s.esFechaInicioInvalida())),n(3),c("ngClass",h(9,Y,s.esFechaInicioInvalida(),s.esFechaInicioValida())),n(3),c("ngClass",h(12,X,s.esFechaFinInvalida(),!s.esFechaFinInvalida())),n(3),c("ngClass",h(15,Y,s.esFechaFinInvalida(),s.esFechaFinValida())))},dependencies:[D,$,G,q,j,P,H,A]})};var R=class i{informeCambio;serviciosMasReservados;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["app-boton-importar-reservaciones"]],inputs:{informeCambio:"informeCambio",serviciosMasReservados:"serviciosMasReservados"},standalone:!0,features:[p],decls:4,vars:0,consts:[["type","button",1,"btn","btn-sm","custom-button"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-filetype-pdf"],["fill-rule","evenodd","d","M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z"]],template:function(e,s){e&1&&(t(0,"button",0),a(1," Importar reporte "),y(),t(2,"svg",1),m(3,"path",2),r()())}})};var oe=(i,o)=>o.idCita;function te(i,o){if(i&1&&(t(0,"tr")(1,"td"),a(2),r(),t(3,"td"),a(4),r(),t(5,"td"),a(6),r(),t(7,"td"),a(8),r(),t(9,"td"),a(10),w(11,"horaPipe"),r()()),i&2){let e=o.$implicit;n(2),d(e.fecha),n(2),d(e.empleado.dpi),n(2),d(e.cliente.dpi),n(2),d(e.estado),n(2),d(N(11,5,e.hora))}}var I=class i{reporte;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["app-tabla-servicios"]],inputs:{reporte:"reporte"},standalone:!0,features:[p],decls:25,vars:4,consts:[[1,"card-text"],[1,"table"],["scope","col"]],template:function(e,s){e&1&&(t(0,"p",0),a(1),r(),t(2,"p",0),a(3),r(),t(4,"p",0),a(5),r(),t(6,"p",0),a(7),r(),t(8,"table",1)(9,"thead")(10,"tr")(11,"th",2),a(12,"Fecha"),r(),t(13,"th",2),a(14,"Empleado"),r(),t(15,"th",2),a(16,"Cliente"),r(),t(17,"th",2),a(18,"Estado"),r(),t(19,"th",2),a(20,"Hora"),r()()(),t(21,"tbody"),b(22,te,12,7,"tr",null,oe),r()(),m(24,"br")),e&2&&(n(),C("Id del servicio: ",s.reporte.servicio.idServicio,""),n(2),C("Nombre del servicio: ",s.reporte.servicio.nombreServicio,""),n(2),C("Veces que se reservo: ",s.reporte.totalCitas,""),n(2),C("Precio actual del servicio: ",s.reporte.servicio.precio,""),n(15),S(s.reporte.citas))},dependencies:[U]})};function re(i,o){if(i&1&&m(0,"app-form-servicios-reservados",0),i&2){let e=x();c("serviciosMasReservados",e.serviciosMasReservados)("datos",e.reporte)("informeCambio",e.informeCambio)}}function ae(i,o){i&1&&a(0," Reporte de los 5 servicios mas reservados ")}function ne(i,o){i&1&&a(0," Reporte de los 5 servicios menos reservados ")}function se(i,o){if(i&1&&m(0,"app-tabla-servicios",8),i&2){let e=o.$implicit;c("reporte",e)}}function me(i,o){i&1&&(t(0,"div",9),a(1," Sin reservaciones registradas "),r())}function ce(i,o){if(i&1&&(t(0,"div",1),m(1,"app-boton-atras",2),t(2,"h2",3),f(3,ae,1,0)(4,ne,1,0),r(),m(5,"app-boton-importar-reservaciones",4),r(),m(6,"br")(7,"app-intervalo-vista",5),t(8,"div",1)(9,"div",6)(10,"div",7),b(11,se,1,1,"app-tabla-servicios",8,V,!1,me,2,0,"div",9),r()()()),i&2){let e=x();n(),c("informe",e.informeCambio),n(2),u(e.serviciosMasReservados?3:4),n(2),c("informeCambio",e.informeCambio)("serviciosMasReservados",e.serviciosMasReservados),n(2),c("informeCambio",e.informeCambio),n(4),S(e.reporte)}}var Z=class i{informeCambio=new K;serviciosMasReservados=!1;route=v(B);reporte=[];ngOnInit(){this.serviciosMasReservados=this.route.snapshot.data.servicioMasReservado??!0}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["app-vista-reporte-servicio"]],standalone:!0,features:[p],decls:3,vars:1,consts:[[3,"serviciosMasReservados","datos","informeCambio"],[1,"d-flex","align-items-center","justify-content-center"],[3,"informe"],[1,"m-3"],[3,"informeCambio","serviciosMasReservados"],[3,"informeCambio"],[1,"card","w-75","m-3","shadow"],[1,"card-body","custom-card"],[3,"reporte"],["role","alert",1,"alert","alert-warning","w-100"]],template:function(e,s){e&1&&(m(0,"app-informacion"),f(1,re,1,3,"app-form-servicios-reservados",0)(2,ce,14,6)),e&2&&(n(),u(s.informeCambio.getCambio()?2:1))},dependencies:[O,F,L,R,Q,I]})};export{Z as VistaReporteServicioComponent};
