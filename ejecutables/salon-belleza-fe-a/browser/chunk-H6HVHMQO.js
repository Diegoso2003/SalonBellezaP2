import{a as L}from"./chunk-5SBUVE6J.js";import{a as W}from"./chunk-2ZKC73YP.js";import{a as U}from"./chunk-2MZD7B76.js";import{a as K,b as Q}from"./chunk-OCPFQW2A.js";import{a as J}from"./chunk-URET6IV6.js";import{a as q,b as S,c as B,d as j,e as G,g as H,h as P,m as z,n as $,o as k,p as O}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{c as A}from"./chunk-H2DLJ7WX.js";import{$a as T,Ka as r,La as V,Va as f,Vb as D,W as C,Xa as m,Y as c,_a as u,ab as h,bb as b,cb as n,db as a,eb as s,gb as R,ha as M,hb as _,qb as o,rb as d,sb as F,vb as p,xb as v,yb as w,zb as N}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var X=(i,t)=>({"mb-5":i,"mb-3":t}),Y=(i,t)=>({"is-invalid":i,"is-valid":t});function ee(i,t){i&1&&o(0," Reporte de los 5 clientes que mas citas han hecho ")}function te(i,t){i&1&&o(0," Reporte de los 5 clientes que menos citas han hecho ")}var I=class i{constructor(t){this.formBuilder=t;this.clienteCitasForm=this.formBuilder.group({fechaInicio:["",[S.pattern(/^\d{4}-\d{2}-\d{2}$/)]],fechaFin:["",[S.pattern(/^\d{4}-\d{2}-\d{2}$/)]]}),this.validador=new J(this.clienteCitasForm)}clienteCitasForm;validador;informacion=C(k);adminService=C(L);clienteMasCitas;informeCambio;citasClienteArreglo;enviar(){this.informeCambio.vaciarFechas(),this.clienteCitasForm.valid?this.mandarInfo():(this.informacion.informarError("ingresar correctamente los datos ingresados"),this.clienteCitasForm.markAllAsTouched())}mandarInfo(){let t=this.armarConsulta();this.clienteMasCitas?this.adminService.obtenerClienteMasCitas(t).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(t)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener los datos")}}):this.adminService.obtenerClienteMenosCitas(t).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(t)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener los datos")}})}agregarReporte(t){this.citasClienteArreglo.length=0,this.citasClienteArreglo.push(...t)}informarCambio(t){this.informeCambio.setFechaInicio(t.fechaInicio||""),this.informeCambio.setFechaFin(t.fechaFin||""),this.informeCambio.setCampo(t.campo||""),this.informeCambio.setCambio(!0)}armarConsulta(){let t=this.clienteCitasForm.get("fechaInicio")?.value,e=this.clienteCitasForm.get("fechaFin")?.value,l={};return t!==""&&(l.fechaInicio=t),e!==""&&(l.fechaFin=e),l}esFechaInicioInvalida(){return this.validador.hasErrors("fechaInicio","pattern")}esFechaFinInvalida(){return this.validador.hasErrors("fechaFin","pattern")}esFechaInicioValida(){return this.validador.esValido("fechaInicio")}esFechaFinValida(){return this.validador.esValido("fechaFin")}static \u0275fac=function(e){return new(e||i)(V(z))};static \u0275cmp=c({type:i,selectors:[["app-form-cliente-citas"]],inputs:{clienteMasCitas:"clienteMasCitas",informeCambio:"informeCambio",citasClienteArreglo:"citasClienteArreglo"},standalone:!0,features:[p],decls:22,vars:18,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip02",1,"form-label"],["type","date","id","validationTooltip02","formControlName","fechaInicio",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip01",1,"form-label"],["type","date","id","validationTooltip01","formControlName","fechaFin",1,"form-control",3,"ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),f(4,ee,1,0)(5,te,1,0),a(),n(6,"form",4),R("submit",function(){return l.enviar()}),n(7,"div",5)(8,"label",6),o(9,"Fecha inicio"),a(),s(10,"input",7),n(11,"div",8),o(12,"Ingrese una fecha valida"),a()(),n(13,"div",5)(14,"label",9),o(15,"Fecha fin"),a(),s(16,"input",10),n(17,"div",8),o(18,"Ingrese una fecha valida"),a()(),n(19,"div",11)(20,"button",12),o(21,"Realizar consulta"),a()()()()()()),e&2&&(r(4),u(l.clienteMasCitas?4:5),r(2),m("formGroup",l.clienteCitasForm),r(),m("ngClass",v(6,X,l.esFechaInicioInvalida(),!l.esFechaInicioInvalida())),r(3),m("ngClass",v(9,Y,l.esFechaInicioInvalida(),l.esFechaInicioValida())),r(3),m("ngClass",v(12,X,l.esFechaFinInvalida(),!l.esFechaFinInvalida())),r(3),m("ngClass",v(15,Y,l.esFechaFinInvalida(),l.esFechaFinValida())))},dependencies:[D,$,G,q,B,j,H,P]})};var g=class i{clienteMasCitas;informeCambio;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-boton-importar-cliente-citas"]],inputs:{clienteMasCitas:"clienteMasCitas",informeCambio:"informeCambio"},standalone:!0,features:[p],decls:4,vars:0,consts:[["type","button",1,"btn","btn-sm","custom-button"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-filetype-pdf"],["fill-rule","evenodd","d","M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z"]],template:function(e,l){e&1&&(n(0,"button",0),o(1," Importar reporte "),M(),n(2,"svg",1),s(3,"path",2),a()())}})};var ie=(i,t)=>t.idCita;function ne(i,t){if(i&1&&(n(0,"tr")(1,"td"),o(2),a(),n(3,"td"),o(4),a(),n(5,"td"),o(6),a(),n(7,"td"),o(8),a(),n(9,"td"),o(10),w(11,"horaPipe"),a()()),i&2){let e=t.$implicit;r(2),d(e.fecha),r(2),d(e.servicio.nombreServicio),r(2),d(e.empleado.dpi),r(2),d(e.estado),r(2),d(N(11,5,e.hora))}}var x=class i{clienteCitas;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-tabla-cliente-citas"]],inputs:{clienteCitas:"clienteCitas"},standalone:!0,features:[p],decls:23,vars:3,consts:[[1,"card-text"],[1,"table"],["scope","col"]],template:function(e,l){e&1&&(n(0,"p",0),o(1),a(),n(2,"p",0),o(3),a(),n(4,"p",0),o(5),a(),n(6,"table",1)(7,"thead")(8,"tr")(9,"th",2),o(10,"Fecha"),a(),n(11,"th",2),o(12,"Servicio"),a(),n(13,"th",2),o(14,"Empleado"),a(),n(15,"th",2),o(16,"Estado"),a(),n(17,"th",2),o(18,"Hora"),a()()(),n(19,"tbody"),h(20,ne,12,7,"tr",null,ie),a()(),s(22,"br")),e&2&&(r(),F("Dpi cliente: ",l.clienteCitas.cliente.dpi,""),r(2),F("Nombre cliente: ",l.clienteCitas.cliente.nombre,""),r(2),F("Total citas: ",l.clienteCitas.totalCitas,""),r(15),b(l.clienteCitas.citas))},dependencies:[W]})};function ae(i,t){if(i&1&&s(0,"app-form-cliente-citas",0),i&2){let e=_();m("clienteMasCitas",e.clienteMasCitas)("informeCambio",e.informeCambio)("citasClienteArreglo",e.clientes)}}function oe(i,t){i&1&&o(0," Reporte de los 5 clientes que mas citas han hecho ")}function re(i,t){i&1&&o(0," Reporte de los 5 clientes que menos citas han hecho ")}function le(i,t){if(i&1&&s(0,"app-tabla-cliente-citas",8),i&2){let e=t.$implicit;m("clienteCitas",e)}}function se(i,t){i&1&&(n(0,"div",9),o(1," Sin registro de citas reservadas "),a())}function me(i,t){if(i&1&&(n(0,"div",1),s(1,"app-boton-atras",2),n(2,"h2",3),f(3,oe,1,0)(4,re,1,0),a(),s(5,"app-boton-importar-cliente-citas",4),a(),s(6,"br")(7,"app-intervalo-vista",5),n(8,"div",1)(9,"div",6)(10,"div",7),h(11,le,1,1,"app-tabla-cliente-citas",8,T,!1,se,2,0,"div",9),a()()()),i&2){let e=_();r(),m("informe",e.informeCambio),r(2),u(e.clienteMasCitas?3:4),r(2),m("clienteMasCitas",e.clienteMasCitas)("informeCambio",e.informeCambio),r(2),m("informeCambio",e.informeCambio),r(4),b(e.clientes)}}var Z=class i{informeCambio=new K;clienteMasCitas=!0;clientes=[];router=C(A);ngOnInit(){this.clienteMasCitas=this.router.snapshot.data.clienteMasCitas??!0}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-vista-reporte-cliente-citas"]],standalone:!0,features:[p],decls:3,vars:1,consts:[[3,"clienteMasCitas","informeCambio","citasClienteArreglo"],[1,"d-flex","align-items-center","justify-content-center"],[3,"informe"],[1,"m-3"],[3,"clienteMasCitas","informeCambio"],[3,"informeCambio"],[1,"card","w-50","m-3","shadow"],[1,"card-body","custom-card"],[3,"clienteCitas"],["role","alert",1,"alert","alert-warning","w-100"]],template:function(e,l){e&1&&(s(0,"app-informacion"),f(1,ae,1,3,"app-form-cliente-citas",0)(2,me,14,6)),e&2&&(r(),u(l.informeCambio.getCambio()?2:1))},dependencies:[O,I,Q,g,U,x]})};export{Z as VistaReporteClienteCitasComponent};
