import{a as j}from"./chunk-JXNCFO7G.js";import{a as L}from"./chunk-VG6MFNQK.js";import{a as A}from"./chunk-URET6IV6.js";import{a as E,b as m,c as I,d as S,e as y,g as V,h as G,l as q,m as H,n as N,o as w,p as k}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{e as T}from"./chunk-H2DLJ7WX.js";import{Ka as a,La as _,Va as c,Vb as F,W as f,Xa as l,Y as C,_a as u,cb as n,db as r,eb as p,gb as b,qb as t,vb as D,xb as d}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var v=(i,o)=>({"mb-5":i,"mb-3":o}),h=(i,o)=>({"is-invalid":i,"is-valid":o});function U(i,o){i&1&&t(0," Ingrese una descripcion ")}function R(i,o){i&1&&t(0," descripcion demasiado corta ")}function J(i,o){i&1&&t(0," Llene el campo ")}function O(i,o){i&1&&t(0," texto demasiado corto ")}function P(i,o){i&1&&t(0," escriba sus hobbies ")}function x(i,o){i&1&&t(0," texto demasiado corto ")}function z(i,o){i&1&&t(0," Ingrese su direccion ")}function K(i,o){i&1&&t(0," Ingrese una direccion valida ")}function Q(i,o){i&1&&t(0," Ingrese su foto de perfil ")}function W(i,o){i&1&&t(0," foto demasiado grande, escoja una menor a 64kb ")}var B=class i{constructor(o){this.formBuilder=o;this.detallesForm=this.formBuilder.group({direccion:["",[m.required,m.minLength(6),m.maxLength(250)]],descripcion:["",[m.required,m.minLength(20)]],hobbies:["",[m.required,m.minLength(20)]],gustos:["",[m.required,m.minLength(20)]]}),this.validadorform=new A(this.detallesForm)}detallesForm;informacion=f(w);validadorform;_clienteService=f(j);_usuarioService=f(L);router=f(T);usuario;foto=null;inputFotoTocado=!1;enviar(){if(this.detallesForm.valid&&this.foto!==null){this.usuario=this.detallesForm.value,this.usuario.dpi=this._usuarioService.getToken()||"1",console.log(this.usuario);let o=new FormData;o.append("datos",JSON.stringify(this.usuario)),o.append("foto",this.foto),this._clienteService.a\u00F1adirDetalles(o).subscribe({next:()=>{this.router.navigate(["/cliente"])},error:s=>{console.log(s),this.informacion.informarError(s.error.mensaje||"Error al a\xF1adir detalles"),this.detallesForm.markAllAsTouched()}})}else this.informacion.informarError("Ingresa todos los campos"),this.detallesForm.markAllAsTouched(),this.inputFotoTocado=!0}archivoSeleccionado(o){let s=o.target;s.files&&s.files.length>0?this.foto=s.files[0]:this.foto=null,this.inputFotoTocado=!0}faltaDescripcion(){return this.validadorform.hasErrors("descripcion","required")}esDescripcionInvalida(){return this.validadorform.hasErrors("descripcion","minlength")}esDescripcionValida(){return this.validadorform.esValido("descripcion")}faltaGustos(){return this.validadorform.hasErrors("gustos","required")}esGustosInvalido(){return this.validadorform.hasErrors("gustos","minlength")}esGustosValido(){return this.validadorform.esValido("gustos")}faltaHobbies(){return this.validadorform.hasErrors("hobbies","required")}sonHobbiesInvalido(){return this.validadorform.hasErrors("hobbies","minlength")}sonHobbiesValido(){return this.validadorform.esValido("hobbies")}faltaDireccion(){return this.validadorform.hasErrors("direccion","required")}esDireccionInvalida(){return this.validadorform.hasErrors("direccion","minlength")||this.validadorform.hasErrors("direccion","maxlength")}esDireccionValida(){return this.validadorform.esValido("direccion")}faltaFoto(){return this.foto===null&&this.inputFotoTocado}esFotoValida(){return this.foto!==null&&this.inputFotoTocado}static \u0275fac=function(s){return new(s||i)(_(H))};static \u0275cmp=C({type:i,selectors:[["app-detalles"]],standalone:!0,features:[D],decls:45,vars:46,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip01",1,"form-label"],["rows","3","id","validationTooltip01","formControlName","descripcion","required","",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip02",1,"form-label"],["rows","3","id","validationTooltip02","formControlName","gustos","required","",1,"form-control",3,"ngClass"],["for","validationTooltip03",1,"form-label"],["rows","3","id","validationTooltip03","formControlName","hobbies","required","",1,"form-control",3,"ngClass"],["for","validationTooltip04",1,"form-label"],["type","text","id","validationTooltip04","formControlName","direccion","required","",1,"form-control",3,"ngClass"],["for","validationTooltip05",1,"form-label"],["type","file","accept","image/*","id","validationTooltip05","required","",1,"form-control",3,"change","click","ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(s,e){s&1&&(p(0,"app-informacion"),n(1,"div",0)(2,"div",1)(3,"div",2)(4,"h5",3),t(5,"Agregar detalles"),r(),n(6,"form",4),b("submit",function(){return e.enviar()}),n(7,"div",5)(8,"label",6),t(9,"Descripcion"),r(),p(10,"textarea",7),n(11,"div",8),c(12,U,1,0)(13,R,1,0),r()(),n(14,"div",5)(15,"label",9),t(16,"Gustos"),r(),p(17,"textarea",10),n(18,"div",8),c(19,J,1,0)(20,O,1,0),r()(),n(21,"div",5)(22,"label",11),t(23,"Hobbies"),r(),p(24,"textarea",12),n(25,"div",8),c(26,P,1,0)(27,x,1,0),r()(),n(28,"div",5)(29,"label",13),t(30,"Direccion"),r(),p(31,"input",14),n(32,"div",8),c(33,z,1,0)(34,K,1,0),r()(),n(35,"div",5)(36,"label",15),t(37,"Fotografia"),r(),n(38,"input",16),b("change",function(M){return e.archivoSeleccionado(M)})("click",function(){return e.inputFotoTocado=!0}),r(),n(39,"div",8),c(40,Q,1,0)(41,W,1,0),r()(),n(42,"div",17)(43,"button",18),t(44,"Agregar detalles"),r()()()()()()),s&2&&(a(6),l("formGroup",e.detallesForm),a(),l("ngClass",d(16,v,e.faltaDescripcion()||e.esDescripcionInvalida(),!(e.faltaDescripcion()||e.esDescripcionInvalida()))),a(3),l("ngClass",d(19,h,e.faltaDescripcion()||e.esDescripcionInvalida(),e.esDescripcionValida())),a(2),u(e.faltaDescripcion()?12:13),a(2),l("ngClass",d(22,v,e.faltaGustos()||e.esGustosInvalido(),!(e.faltaGustos()||e.esGustosInvalido()))),a(3),l("ngClass",d(25,h,e.faltaGustos()||e.esGustosInvalido(),e.esGustosValido())),a(2),u(e.faltaGustos()?19:20),a(2),l("ngClass",d(28,v,e.faltaHobbies()||e.sonHobbiesInvalido(),!(e.faltaHobbies()||e.sonHobbiesInvalido()))),a(3),l("ngClass",d(31,h,e.faltaHobbies()||e.sonHobbiesInvalido(),e.sonHobbiesValido())),a(2),u(e.faltaHobbies()?26:27),a(2),l("ngClass",d(34,v,e.faltaDireccion()||e.esDireccionInvalida(),!(e.faltaDireccion()||e.esDireccionInvalida()))),a(3),l("ngClass",d(37,h,e.faltaDireccion()||e.esDireccionInvalida(),e.esDireccionValida())),a(2),u(e.faltaDireccion()?33:34),a(2),l("ngClass",d(40,v,e.faltaFoto(),!e.faltaFoto())),a(3),l("ngClass",d(43,h,e.faltaFoto(),e.esFotoValida())),a(2),u(e.faltaFoto()?40:41))},dependencies:[F,N,y,E,I,S,q,V,G,k]})};export{B as DetallesComponent};
