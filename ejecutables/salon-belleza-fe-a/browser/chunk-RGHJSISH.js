import{a as K}from"./chunk-6FP45YGO.js";import{a as J}from"./chunk-BCQ6RXAA.js";import{a as z}from"./chunk-5SBUVE6J.js";import"./chunk-2ZKC73YP.js";import{a as H}from"./chunk-2MZD7B76.js";import{a as k,b as q}from"./chunk-OCPFQW2A.js";import{a as $}from"./chunk-URET6IV6.js";import{a as T,b as u,c as A,d as D,e as R,g as N,h as w,m as B,n as j,o as M,p as P}from"./chunk-QEQSUI4L.js";import"./chunk-K7U5DLAY.js";import{$a as E,Ka as n,La as G,Va as F,Vb as x,W as h,Xa as m,Y as c,_a as g,ab as _,bb as y,cb as t,db as r,eb as p,gb as S,hb as f,qb as l,sb as V,vb as v,xb as s}from"./chunk-TQRRVTAY.js";import"./chunk-2VMXMS7J.js";var b=(i,a)=>({"mb-5":i,"mb-3":a}),I=(i,a)=>({"is-invalid":i,"is-valid":a}),C=class i{constructor(a){this.formBuilder=a;this.empleadoGananciasForm=this.formBuilder.group({fechaInicio:["",[u.pattern(/^\d{4}-\d{2}-\d{2}$/)]],fechaFin:["",[u.pattern(/^\d{4}-\d{2}-\d{2}$/)]],dpi:["",[u.pattern(/^[1-9]\d{12}$/)]]}),this.validador=new $(this.empleadoGananciasForm)}empleadoGananciasForm;validador;informacion=h(M);adminService=h(z);informeCambio;empleadoGananciasArreglo;enviar(){this.informeCambio.vaciarFechas(),this.empleadoGananciasForm.valid?this.mandarInfo():(this.informacion.informarError("ingresar correctamente los datos ingresados"),this.empleadoGananciasForm.markAllAsTouched())}mandarInfo(){let a=this.armarConsulta();this.adminService.obtenerGananciasPorEmpleado(a).subscribe({next:e=>{this.agregarReporte(e),this.informarCambio(a)},error:e=>{this.informacion.informarError(e.error.mensaje||"Error al obtener el reporte de ganancias por empleado"),console.error(e)}})}agregarReporte(a){this.empleadoGananciasArreglo.length=0,this.empleadoGananciasArreglo.push(...a)}informarCambio(a){this.informeCambio.setFechaInicio(a.fechaInicio||""),this.informeCambio.setFechaFin(a.fechaFin||""),this.informeCambio.setCampo(a.campo||""),this.informeCambio.setCambio(!0)}armarConsulta(){let a=this.empleadoGananciasForm.get("fechaInicio")?.value,e=this.empleadoGananciasForm.get("fechaFin")?.value,o=this.empleadoGananciasForm.get("dpi")?.value,d={};return a!==""&&(d.fechaInicio=a),e!==""&&(d.fechaFin=e),o!==""&&(d.campo=o),d}esFechaInicioInvalida(){return this.validador.hasErrors("fechaInicio","pattern")}esFechaFinInvalida(){return this.validador.hasErrors("fechaFin","pattern")}esFechaInicioValida(){return this.validador.esValido("fechaInicio")}esFechaFinValida(){return this.validador.esValido("fechaFin")}esDpiInvalido(){return this.validador.hasErrors("dpi","pattern")}esDpiValido(){return this.validador.esValido("dpi")}static \u0275fac=function(e){return new(e||i)(G(B))};static \u0275cmp=c({type:i,selectors:[["app-form-empleado-ganancias"]],inputs:{informeCambio:"informeCambio",empleadoGananciasArreglo:"empleadoGananciasArreglo"},standalone:!0,features:[v],decls:27,vars:25,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","w-25","m-3","shadow"],[1,"card-body","custom-card"],[1,"card-title","text-center","mb-3"],["novalidate","",1,"needs-validation",3,"submit","formGroup"],[1,"position-relative",3,"ngClass"],["for","validationTooltip02",1,"form-label"],["type","date","id","validationTooltip02","formControlName","fechaInicio",1,"form-control",3,"ngClass"],[1,"invalid-tooltip"],["for","validationTooltip01",1,"form-label"],["type","date","id","validationTooltip01","formControlName","fechaFin",1,"form-control",3,"ngClass"],["for","validationTooltip04",1,"form-label"],["type","text","id","validationTooltip04","formControlName","dpi",1,"form-control",3,"ngClass"],[1,"mb-3","d-flex","justify-content-center"],["type","submit",1,"custom-button"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),l(4," Reporte de ganancias por empleado "),r(),t(5,"form",4),S("submit",function(){return o.enviar()}),t(6,"div",5)(7,"label",6),l(8,"Fecha inicio"),r(),p(9,"input",7),t(10,"div",8),l(11,"Ingrese una fecha valida"),r()(),t(12,"div",5)(13,"label",9),l(14,"Fecha fin"),r(),p(15,"input",10),t(16,"div",8),l(17,"Ingrese una fecha valida"),r()(),t(18,"div",5)(19,"label",11),l(20,"DPI empleado"),r(),p(21,"input",12),t(22,"div",8),l(23,"Ingrese un dpi valido"),r()(),t(24,"div",13)(25,"button",14),l(26,"Realizar consulta"),r()()()()()()),e&2&&(n(5),m("formGroup",o.empleadoGananciasForm),n(),m("ngClass",s(7,b,o.esFechaInicioInvalida(),!o.esFechaInicioInvalida())),n(3),m("ngClass",s(10,I,o.esFechaInicioInvalida(),o.esFechaInicioValida())),n(3),m("ngClass",s(13,b,o.esFechaFinInvalida(),!o.esFechaFinInvalida())),n(3),m("ngClass",s(16,I,o.esFechaFinInvalida(),o.esFechaFinValida())),n(3),m("ngClass",s(19,b,o.esDpiInvalido(),!o.esDpiInvalido())),n(3),m("ngClass",s(22,I,o.esDpiInvalido(),o.esDpiValido())))},dependencies:[x,j,R,T,A,D,N,w]})};function U(i,a){if(i&1&&p(0,"app-form-empleado-ganancias",0),i&2){let e=f();m("informeCambio",e.informeCambio)("empleadoGananciasArreglo",e.empleadoGananciasArreglo)}}function W(i,a){if(i&1&&(t(0,"h5",5),l(1),r()),i&2){let e=f(2);n(),V(" Filtrado por el empleado: ",e.informeCambio.getCampo(),`
`)}}function X(i,a){if(i&1&&p(0,"app-tabla-empleado-informe",8),i&2){let e=a.$implicit;m("empleado",e)}}function Y(i,a){i&1&&(t(0,"div",9),l(1," Sin registro de citas atendidas "),r())}function Z(i,a){if(i&1&&(t(0,"div",1),p(1,"app-boton-atras",2),t(2,"h2",3),l(3,"Reporte de ganancias por empleado"),r(),p(4,"app-boton-importar-servicio-ganancias",4),r(),p(5,"br")(6,"app-intervalo-vista",4),F(7,W,2,1,"h5",5),t(8,"div",1)(9,"div",6)(10,"div",7),_(11,X,1,1,"app-tabla-empleado-informe",8,E,!1,Y,2,0,"div",9),r()()()),i&2){let e=f();n(),m("informe",e.informeCambio),n(3),m("informeCambio",e.informeCambio),n(2),m("informeCambio",e.informeCambio),n(),g(e.informeCambio.esCampoValido()?7:-1),n(4),y(e.empleadoGananciasArreglo)}}var L=class i{informeCambio=new k;empleadoGananciasArreglo=[];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-vista-reporte-ganancias-empleado"]],standalone:!0,features:[v],decls:3,vars:1,consts:[[3,"informeCambio","empleadoGananciasArreglo"],[1,"d-flex","align-items-center","justify-content-center"],[3,"informe"],[1,"m-3"],[3,"informeCambio"],[1,"text-center"],[1,"card","w-50","m-3","shadow"],[1,"card-body","custom-card"],[3,"empleado"],["role","alert",1,"alert","alert-warning","w-100"]],template:function(e,o){e&1&&(p(0,"app-informacion"),F(1,U,1,2,"app-form-empleado-ganancias",0)(2,Z,14,5)),e&2&&(n(),g(o.informeCambio.getCambio()?2:1))},dependencies:[P,C,q,J,H,K]})};export{L as VistaReporteGananciasEmpleadoComponent};
